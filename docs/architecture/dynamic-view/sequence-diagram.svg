<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="588px" preserveAspectRatio="none" style="width:1142px;height:588px;background:#FFFFFF;" version="1.1" viewBox="0 0 1142 588" width="1142px" zoomAndPan="magnify"><title>&#1074;&#1026;&#1114;New Estimate&#1074;&#1026;&#1116; Request Flow</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="247.625" x="449.0906" y="29.5332">&#1074;&#1026;&#1114;New Estimate&#1074;&#1026;&#1116; Request Flow</text><g><title>API Gateway</title><rect fill="#FFFFFF" height="255.8125" style="stroke:#181818;stroke-width:1;" width="10" x="465.8403" y="187.5313"/></g><g><title>Estimator</title><rect fill="#FFFFFF" height="195.1094" style="stroke:#181818;stroke-width:1;" width="10" x="594.5029" y="217.8828"/></g><g><title>Data</title><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1;" width="10" x="812.7437" y="248.2344"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1;" width="10" x="1095.6753" y="278.5859"/></g><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="366.8672" width="8" x="18.7793" y="124.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="22" x2="22" y1="124.8281" y2="491.6953"/></g><g><title>Web UI</title><rect fill="#000000" fill-opacity="0.00000" height="366.8672" width="8" x="202.2388" y="124.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="205.9009" x2="205.9009" y1="124.8281" y2="491.6953"/></g><g><title>API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="366.8672" width="8" x="466.8403" y="124.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="469.9888" x2="469.9888" y1="124.8281" y2="491.6953"/></g><g><title>Estimator</title><rect fill="#000000" fill-opacity="0.00000" height="366.8672" width="8" x="595.5029" y="124.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="598.9409" x2="598.9409" y1="124.8281" y2="491.6953"/></g><g><title>Data</title><rect fill="#000000" fill-opacity="0.00000" height="366.8672" width="8" x="813.7437" y="124.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="817.4023" x2="817.4023" y1="124.8281" y2="491.6953"/></g><g><title>PostgreSQL</title><rect fill="#000000" fill-opacity="0.00000" height="366.8672" width="8" x="1096.6753" y="124.8281"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1100.5444" x2="1100.5444" y1="124.8281" y2="491.6953"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.5586" x="5" y="121.752">User</text><ellipse cx="22.7793" cy="55.7188" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22.7793,63.7188 L22.7793,90.7188 M9.7793,71.7188 L35.7793,71.7188 M22.7793,90.7188 L9.7793,105.7188 M22.7793,90.7188 L35.7793,105.7188" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.5586" x="5" y="505.2285">User</text><ellipse cx="22.7793" cy="516.8047" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22.7793,524.8047 L22.7793,551.8047 M9.7793,532.8047 L35.7793,532.8047 M22.7793,551.8047 L9.7793,566.8047 M22.7793,551.8047 L35.7793,566.8047" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="UI"><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60.6758" x="175.9009" y="74.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.6758" x="182.9009" y="96.1426">Web UI</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.8965" x="183.2905" y="113.752">(React)</text></g><g class="participant participant-tail" data-participant="UI"><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60.6758" x="175.9009" y="490.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.6758" x="182.9009" y="512.2285">Web UI</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.8965" x="183.2905" y="529.8379">(React)</text></g><g class="participant participant-head" data-participant="API"><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.7031" x="422.9888" y="74.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.7031" x="429.9888" y="96.1426">API Gateway</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.793" x="442.4438" y="113.752">(Node.js)</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.7031" x="422.9888" y="490.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.7031" x="429.9888" y="512.2285">API Gateway</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.793" x="442.4438" y="529.8379">(Node.js)</text></g><g class="participant participant-head" data-participant="EST"><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73.124" x="562.9409" y="74.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.124" x="569.9409" y="96.1426">Estimator</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.6826" x="576.1616" y="113.752">Service</text></g><g class="participant participant-tail" data-participant="EST"><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73.124" x="562.9409" y="490.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.124" x="569.9409" y="512.2285">Estimator</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.6826" x="576.1616" y="529.8379">Service</text></g><g class="participant participant-head" data-participant="DS"><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60.6826" x="787.4023" y="74.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.5723" x="802.9575" y="96.1426">Data</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.6826" x="794.4023" y="113.752">Service</text></g><g class="participant participant-tail" data-participant="DS"><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60.6826" x="787.4023" y="490.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.5723" x="802.9575" y="512.2285">Data</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.6826" x="794.4023" y="529.8379">Service</text></g><g class="participant participant-head" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.2617" x="1059.5444" y="104.1426">PostgreSQL</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.4893" x="1059.9307" y="121.752">(energy_db)</text><path d="M1082.6753,53.6094 C1082.6753,43.6094 1100.6753,43.6094 1100.6753,43.6094 C1100.6753,43.6094 1118.6753,43.6094 1118.6753,53.6094 L1118.6753,79.6094 C1118.6753,89.6094 1100.6753,89.6094 1100.6753,89.6094 C1100.6753,89.6094 1082.6753,89.6094 1082.6753,79.6094 L1082.6753,53.6094" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1082.6753,53.6094 C1082.6753,63.6094 1100.6753,63.6094 1100.6753,63.6094 C1100.6753,63.6094 1118.6753,63.6094 1118.6753,53.6094" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.2617" x="1059.5444" y="505.2285">PostgreSQL</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.4893" x="1059.9307" y="522.8379">(energy_db)</text><path d="M1082.6753,535.9141 C1082.6753,525.9141 1100.6753,525.9141 1100.6753,525.9141 C1100.6753,525.9141 1118.6753,525.9141 1118.6753,535.9141 L1118.6753,561.9141 C1118.6753,571.9141 1100.6753,571.9141 1100.6753,571.9141 C1100.6753,571.9141 1082.6753,571.9141 1082.6753,561.9141 L1082.6753,535.9141" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1082.6753,535.9141 C1082.6753,545.9141 1100.6753,545.9141 1100.6753,545.9141 C1100.6753,545.9141 1118.6753,545.9141 1118.6753,535.9141" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g><title>API Gateway</title><rect fill="#FFFFFF" height="255.8125" style="stroke:#181818;stroke-width:1;" width="10" x="465.8403" y="187.5313"/></g><g><title>Estimator</title><rect fill="#FFFFFF" height="195.1094" style="stroke:#181818;stroke-width:1;" width="10" x="594.5029" y="217.8828"/></g><g><title>Data</title><rect fill="#FFFFFF" height="91.0547" style="stroke:#181818;stroke-width:1;" width="10" x="812.7437" y="248.2344"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1;" width="10" x="1095.6753" y="278.5859"/></g><g class="message" data-participant-1="User" data-participant-2="UI"><polygon fill="#181818" points="194.2388,153.1797,204.2388,157.1797,194.2388,161.1797,198.2388,157.1797" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="22.7793" x2="200.2388" y1="157.1797" y2="157.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.4595" x="29.7793" y="152.3232">Click &#1074;&#1026;&#1114;Get Estimate&#1074;&#1026;&#1116;</text></g><g class="message" data-participant-1="UI" data-participant-2="API"><polygon fill="#181818" points="453.8403,183.5313,463.8403,187.5313,453.8403,191.5313,457.8403,187.5313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="206.2388" x2="459.8403" y1="187.5313" y2="187.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240.6016" x="213.2388" y="182.6748">POST /estimate { userId, profile, params }</text></g><g class="message" data-participant-1="API" data-participant-2="EST"><polygon fill="#181818" points="582.5029,213.8828,592.5029,217.8828,582.5029,221.8828,586.5029,217.8828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="475.8403" x2="588.5029" y1="217.8828" y2="217.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.6499" x="482.8403" y="213.0264">Forward request</text></g><g class="message" data-participant-1="EST" data-participant-2="DS"><polygon fill="#181818" points="800.7437,244.2344,810.7437,248.2344,800.7437,252.2344,804.7437,248.2344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="604.5029" x2="806.7437" y1="248.2344" y2="248.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.7026" x="611.5029" y="243.3779">GetRates(userId)</text></g><g class="message" data-participant-1="DS" data-participant-2="DB"><polygon fill="#181818" points="1083.6753,274.5859,1093.6753,278.5859,1083.6753,282.5859,1087.6753,278.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="822.7437" x2="1089.6753" y1="278.5859" y2="278.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="253.9316" x="829.7437" y="273.7295">SELECT * FROM rates WHERE user_id = ?</text></g><g class="message" data-participant-1="DB" data-participant-2="DS"><polygon fill="#181818" points="833.7437,304.9375,823.7437,308.9375,833.7437,312.9375,829.7437,308.9375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="827.7437" x2="1099.6753" y1="308.9375" y2="308.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62.1309" x="839.7437" y="304.0811">[rateRows]</text></g><g class="message" data-participant-1="DS" data-participant-2="EST"><polygon fill="#181818" points="615.5029,335.2891,605.5029,339.2891,615.5029,343.2891,611.5029,339.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="609.5029" x2="816.7437" y1="339.2891" y2="339.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37.5845" x="621.5029" y="334.4326">{rates}</text></g><g class="message" data-participant-1="EST" data-participant-2="EST"><line style="stroke:#181818;stroke-width:1;" x1="604.5029" x2="646.5029" y1="369.6406" y2="369.6406"/><line style="stroke:#181818;stroke-width:1;" x1="646.5029" x2="646.5029" y1="369.6406" y2="382.6406"/><line style="stroke:#181818;stroke-width:1;" x1="605.5029" x2="646.5029" y1="382.6406" y2="382.6406"/><polygon fill="#181818" points="615.5029,378.6406,605.5029,382.6406,615.5029,386.6406,611.5029,382.6406" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.2407" x="611.5029" y="364.7842">computeSavings(rates, params)</text></g><g class="message" data-participant-1="EST" data-participant-2="API"><polygon fill="#181818" points="486.8403,408.9922,476.8403,412.9922,486.8403,416.9922,482.8403,412.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="480.8403" x2="598.5029" y1="412.9922" y2="412.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.6626" x="492.8403" y="408.1357">{estimateResult}</text></g><g class="message" data-participant-1="API" data-participant-2="UI"><polygon fill="#181818" points="217.2388,439.3438,207.2388,443.3438,217.2388,447.3438,213.2388,443.3438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="211.2388" x2="469.8403" y1="443.3438" y2="443.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.3589" x="223.2388" y="438.4873">200 OK {estimateResult}</text></g><g class="message" data-participant-1="UI" data-participant-2="User"><polygon fill="#181818" points="33.7793,469.6953,23.7793,473.6953,33.7793,477.6953,29.7793,473.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="27.7793" x2="205.2388" y1="473.6953" y2="473.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.498" x="39.7793" y="468.8389">Display cost-saving chart</text></g><!--SRC=[VPBVJk905CRlvobEk17CecOlINIpsA9aLR23yM8rPcWFE5ewTMQW8OJ4x6DiU8fz4lSLzadsp1IGUk5Lvy_lVESxttJlxS_Rht-lg_K71jAc22Eb8Kw5bdOELO1P3xZTtzzNM41eh9m8Y_va1H6-JD5OwAIgO4p4bfHk36gM2srbB7EHMQZTuX1kkdTPFK926ZKGXlPLvdk_2sSaN8WvWLSgmOCdKw9qLMNN9fI-opZgcOpHSo4VLBb0M5550iuIEXmAWr3hAsF76ldr1NN43FLu_f0Covv1cp4t23HFo2gqu3ILyVCwY3Eq7u9Wn13fXcX1lyS7S8Xh01Om9Q5kyWLohKOoHLe8BIO6bYunENEGcv6vSbAXEKYbetGXT0AwZFWTTMConn0QS2B9JaGNfbxsQRoZD2uZn85j0dbu4PuEO1ywKUyIjAk1s_Cm2ht31vd0CNpRgMupAcjkslnq1P4gp3rBS1VoBRQ-5rvtMM7urd39n6gIJoroCPFPsDHznIQLHebkqrniWepGJ5DR4VPH-DGsp_Jrw0XwFpujyb6Nx-LVk0M1D7agvcJBsARnfY1-f3-9_GS0]--></g></svg>